<ng-container *ngIf="isLoading">
    <div class="progress progress-modal">
      <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar"
        style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </ng-container>
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title h4" id="example-modal-sizes-title-lg">
        <i class="icon-2x text-dark-50 flaticon-user-add mx-2"></i> Crear Usuario
      </div>
    </div>
    <div
      class="overlay overlay-block cursor-default modal-body"
      style="min-height: 404px"
    >
      <ng-container *ngIf="isLoading$ | async">
        <div class="overlay-layer bg-transparent">
          <div class="spinner spinner-lg spinner-success"></div>
        </div>
      </ng-container>

      <form action="#" class="form form-label-right" [formGroup]="formGroup">
        <div class="form-group row">
          <div class="col-lg-6">
            <label class="form-label">Nombres Completos</label>
            <input type="text" 
                    placeholder="Nombre" 
                    class="form-control form-control-solid form-control-lg" 
                    formControlName="name"
                    name="name"
                    autocomplete="off"
                    [class.is-invalid]="isControlInvalid('name')"
                    [class.is-valid]="isControlValid('name')"
                    >
            <div class="valid-feedback" *ngIf="isControlValid('name')">
              El nombre se ingresó correctamente
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('required', 'name')"
          >
            Se requiere el nombre completo
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('minlength', 'name')"
          >
            El nombre debe tener al menos 3 letras
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('maxlength', 'name')"
          >
            El nombre debe tener un máximo de 100 letras
          </div>
          </div>
          <div class="col-lg-6">
            <label class="form-label">Apellidos</label>
            <input type="text" 
                    placeholder="Apellidos" 
                    class="form-control form-control-solid form-control-lg" 
                    formControlName="surname"
                    name="surname"
                    autocomplete="off"
                    [class.is-invalid]="isControlInvalid('surname')"
                    [class.is-valid]="isControlValid('surname')"
                    >
            <div class="valid-feedback" *ngIf="isControlValid('surname')">
              El apellido se ingresó correctamente
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('required', 'surname')"
          >
            Se requiere el apellido completo
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('minlength', 'surname')"
          >
            El apellido debe tener al menos 3 letras
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('maxlength', 'surname')"
          >
            El apellido debe tener un máximo de 100 letras
          </div>
          </div>
        </div>
        <div class="form-group row justify-content-center">
          <div class="col-lg-10">
            <label class="form-label">Correo electónico</label>
            <input type="text" 
                    placeholder="Email" 
                    class="form-control form-control-solid form-control-lg" 
                    formControlName="email"
                    name="email"
                    autocomplete="off"
                    [class.is-invalid]="isControlInvalid('email')"
                    [class.is-valid]="isControlValid('email')"
                    >
            <div class="valid-feedback" *ngIf="isControlValid('email')">
              El correo se ingresó correctamente
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('required', 'email')"
          >
            Se requiere el correo completo
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('minlength', 'email')"
          >
            El correo debe tener al menos 3 letras
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('maxlength', 'email')"
          >
            El correo debe tener un máximo de 249 letras
          </div>
          </div>
          <div class="col-lg-10">
            <label class="form-label">Selec. Rol: *</label>
            <select name="role_id" class="form-control form-control-solid form-control-lg" formControlName="role_id">
              <option value="">Ninguno</option>
              <option value="1" selected>ADMINISTRADOR GENERAL</option>
            </select>
          </div>
        </div>
        <div class="form-group row">
          <div class="col-lg-6">
            <label class="form-label">Contraseña: *</label>
            <input type="password" 
                    placeholder="Contraseña" 
                    class="form-control form-control-solid form-control-lg" 
                    formControlName="password"
                    name="password"
                    autocomplete="off"
                    [class.is-invalid]="isControlInvalid('password')"
                    [class.is-valid]="isControlValid('password')"
                    >
            <div class="valid-feedback" *ngIf="isControlValid('password')">
              La contraseña se ingresó correctamente
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('required', 'password')"
          >
            Se requiere La contraseña completa
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('minlength', 'password')"
          >
            La contraseña debe tener al menos 3 letras
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('maxlength', 'password')"
          >
            La contraseña debe tener un máximo de 100 letras
          </div>
          </div>
          <div class="col-lg-6">
            <label class="form-label">Repetir Contraseña: *</label>
            <input type="password" 
                    placeholder="Repetir contraseña" 
                    class="form-control form-control-solid form-control-lg" 
                    formControlName="rpassword"
                    name="rpassword"
                    autocomplete="off"
                    [class.is-invalid]="isControlInvalid('rpassword')"
                    [class.is-valid]="isControlValid('rpassword')"
                    >
            <div class="valid-feedback" *ngIf="isControlValid('rpassword')">
              las contraseña se ingresó correctamente
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('required', 'rpassword')"
          >
            Se requiere las contraseña completa
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('minlength', 'rpassword')"
          >
            las contraseña debe tener al menos 3 letras
          </div>
          <div
            class="invalid-feedback"
            *ngIf="controlHasError('maxlength', 'rpassword')"
          >
            las contraseña debe tener un máximo de 100 letras
          </div>
          </div>
        </div>
      </form>

</div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-light btn-elevate mr-2"
        (click)="modal.dismiss()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary btn-elevate mr-2"
        (click)="save()"
        [disabled]="formGroup.invalid"
      >
        Guardar
      </button>
    </div>
  </div>